import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
import { Link } from "react-router-dom";
import { createPageUrl } from "@/utils";
import { 
  Target, 
  Plus, 
  Shield, 
  BookOpen, 
  Zap, 
  Users, 
  CheckCircle, 
  ArrowRight,
  AlertTriangle,
  Scale,
  FileText,
  Search
} from "lucide-react";

export default function GettingStarted() {
  const [completedSteps, setCompletedSteps] = useState(new Set());

  const markStepComplete = (stepId) => {
    setCompletedSteps(prev => new Set([...prev, stepId]));
  };

  const quickStartPaths = [
    {
      id: "had_incident",
      title: "Something happened to me",
      description: "Police interaction, rights violation, or unfair treatment",
      icon: AlertTriangle,
      color: "bg-red-600",
      steps: [
        {
          title: "Report the Incident",
          description: "Document what happened with our secure form",
          action: "Report Incident",
          url: "ReportIncident",
          icon: Plus
        },
        {
          title: "Learn Your Rights",
          description: "Understand what rights were potentially violated",
          action: "Know My Rights",
          url: "KnowYourRights",
          icon: Shield
        },
        {
          title: "Analyze Evidence",
          description: "Upload photos, videos, or documents for AI analysis",
          action: "Analyze Evidence",
          url: "DocumentAnalyzer",
          icon: FileText
        },
        {
          title: "Get AI Help",
          description: "Get strategic advice on your next steps",
          action: "AI Case Helper",
          url: "SelfLitigantCenter",
          icon: Zap
        }
      ]
    },
    {
      id: "want_learn",
      title: "I want to learn my rights",
      description: "Educate yourself about constitutional protections",
      icon: BookOpen,
      color: "bg-blue-600",
      steps: [
        {
          title: "Constitutional Rights Guide",
          description: "Learn your basic constitutional protections",
          action: "Start Learning",
          url: "KnowYourRights",
          icon: Shield
        },
        {
          title: "Legal Dictionary",
          description: "Understand legal terms in plain English",
          action: "Legal Dictionary",
          url: "LegalTranslator",
          icon: BookOpen
        },
        {
          title: "Situation Guides",
          description: "Specific guides for different scenarios",
          action: "Browse Guides",
          url: "LegalResources",
          icon: FileText
        }
      ]
    },
    {
      id: "join_others",
      title: "I want to join with others",
      description: "Find collective action and community support",
      icon: Users,
      color: "bg-purple-600",
      steps: [
        {
          title: "Find Similar Cases",
          description: "See if others have had similar experiences",
          action: "Find Others",
          url: "ClassActionRegistry",
          icon: Users
        },
        {
          title: "Report to Registry",
          description: "Add your case to our national database",
          action: "Submit Report",
          url: "SubmitViolation",
          icon: Plus
        },
        {
          title: "Track Progress",
          description: "Monitor collective actions and investigations",
          action: "Track Cases",
          url: "ComplaintTracker",
          icon: Search
        }
      ]
    }
  ];

  const PathCard = ({ path }) => (
    <Card className="border-0 shadow-lg bg-white hover:shadow-xl transition-shadow">
      <CardHeader className="text-center pb-4">
        <div className={`w-16 h-16 ${path.color} rounded-xl flex items-center justify-center mx-auto mb-4`}>
          <path.icon className="w-8 h-8 text-white" />
        </div>
        <CardTitle className="text-xl">{path.title}</CardTitle>
        <p className="text-slate-600 text-sm">{path.description}</p>
      </CardHeader>
      <CardContent>
        <div className="space-y-3">
          {path.steps.map((step, index) => (
            <div 
              key={index}
              className="flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors"
            >
              <div className="flex items-center justify-center w-8 h-8 bg-slate-100 rounded-full flex-shrink-0">
                {completedSteps.has(`${path.id}-${index}`) ? (
                  <CheckCircle className="w-5 h-5 text-green-600" />
                ) : (
                  <span className="text-sm font-medium text-slate-600">{index + 1}</span>
                )}
              </div>
              <div className="flex-1">
                <h4 className="font-medium text-slate-900 mb-1">{step.title}</h4>
                <p className="text-sm text-slate-600 mb-3">{step.description}</p>
                <Link to={createPageUrl(step.url)}>
                  <Button 
                    size="sm" 
                    className="gap-2"
                    onClick={() => markStepComplete(`${path.id}-${index}`)}
                  >
                    <step.icon className="w-4 h-4" />
                    {step.action}
                  </Button>
                </Link>
              </div>
            </div>
          ))}
        </div>
      </CardContent>
    </Card>
  );

  return (
    <div className="p-6 space-y-8">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <div className="w-16 h-16 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center mx-auto mb-4">
            <Target className="w-8 h-8 text-white" />
          </div>
          <h1 className="text-3xl font-bold text-slate-900 mb-4">Getting Started with Due Process AI</h1>
          <p className="text-lg text-slate-600 max-w-2xl mx-auto">
            Choose your path below to get personalized guidance on using this platform to defend your constitutional rights.
          </p>
        </div>

        {/* Mission Statement */}
        <Alert className="bg-amber-50 border-amber-200 mb-8 max-w-4xl mx-auto">
          <Scale className="h-5 w-5 text-amber-600" />
          <AlertTitle className="text-amber-900 text-lg">Your Constitutional Right to Due Process</AlertTitle>
          <AlertDescription className="text-amber-800 mt-2">
            The 14th Amendment guarantees that no government can "deprive any person of life, liberty, or property, without due process of law." 
            This platform helps you recognize when proper procedures aren't followed and provides tools to defend your rights.
          </AlertDescription>
        </Alert>

        {/* Quick Start Paths */}
        <div className="mb-12">
          <h2 className="text-2xl font-bold text-slate-900 mb-6 text-center">Choose Your Starting Point</h2>
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
            {quickStartPaths.map((path) => (
              <PathCard key={path.id} path={path} />
            ))}
          </div>
        </div>

        {/* Key Features Overview */}
        <Card className="border-0 shadow-lg bg-white mb-8">
          <CardHeader className="text-center">
            <CardTitle className="text-2xl">What You Can Do Here</CardTitle>
            <p className="text-slate-600">A quick overview of our most powerful features</p>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
              {[
                {
                  title: "AI Analysis",
                  description: "Upload any evidence and get AI-powered analysis for constitutional violations",
                  icon: Zap,
                  color: "text-purple-600"
                },
                {
                  title: "Legal Documents",
                  description: "Generate court-ready motions, complaints, and other legal filings", 
                  icon: FileText,
                  color: "text-blue-600"
                },
                {
                  title: "Rights Education", 
                  description: "Learn your constitutional rights in plain English with real examples",
                  icon: BookOpen,
                  color: "text-green-600"
                },
                {
                  title: "Community Action",
                  description: "Join with others to identify patterns and drive systemic change",
                  icon: Users,
                  color: "text-red-600"
                }
              ].map((feature, index) => (
                <div key={index} className="text-center">
                  <div className="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3">
                    <feature.icon className={`w-6 h-6 ${feature.color}`} />
                  </div>
                  <h3 className="font-semibold text-slate-900 mb-2">{feature.title}</h3>
                  <p className="text-sm text-slate-600">{feature.description}</p>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* Emergency Resources */}
        <Card className="border-red-200 bg-red-50">
          <CardHeader>
            <CardTitle className="text-red-900 flex items-center gap-2">
              <AlertTriangle className="w-5 h-5" />
              Emergency Resources
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <h4 className="font-semibold text-red-900 mb-2">Immediate Danger</h4>
                <p className="text-sm text-red-800">Call 911 for immediate threats to safety</p>
              </div>
              <div>
                <h4 className="font-semibold text-red-900 mb-2">Legal Help</h4>
                <p className="text-sm text-red-800">ACLU: 212-549-2500<br />Legal Aid: Dial 211</p>
              </div>
              <div>
                <h4 className="font-semibold text-red-900 mb-2">Crisis Support</h4>
                <p className="text-sm text-red-800">Crisis Text Line: Text HOME to 741741</p>
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Next Steps */}
        <div className="text-center mt-8">
          <h3 className="text-xl font-semibold text-slate-900 mb-4">Ready to Get Started?</h3>
          <div className="flex flex-wrap justify-center gap-3">
            <Link to={createPageUrl("ReportIncident")}>
              <Button className="bg-red-600 hover:bg-red-700 gap-2">
                <Plus className="w-4 h-4" />
                Report an Incident
              </Button>
            </Link>
            <Link to={createPageUrl("KnowYourRights")}>
              <Button variant="outline" className="gap-2">
                <BookOpen className="w-4 h-4" />
                Learn My Rights
              </Button>
            </Link>
            <Link to={createPageUrl("Dashboard")}>
              <Button variant="outline" className="gap-2">
                <ArrowRight className="w-4 h-4" />
                Go to Dashboard
              </Button>
            </Link>
          </div>
        </div>
      </div>
    </div>
  );
}